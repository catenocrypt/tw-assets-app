<html>

<head>
    <link rel="stylesheet" href="style.css">
</head>

<script type="module">
    import { request } from "https://cdn.skypack.dev/@octokit/request";
    import * as assetsLib from "./assetsLib.es.js";
    window.request = request;
    window.assetsLib = assetsLib;
</script>

<script src="src/client-script.js"></script>

<body onload="start()">
    <div>
        <span>
            <a>TW Assets App</a>
            <img src="favicon.ico" height="20" />
        </span>
        <span id="user">-</span>
        <hr />
    </div>
    <div>
        <a href="#" onclick="tabSelect('add')">Add New Token</a> |
        <a href="#" onclick="tabSelect('prs')">Pull Requests</a> |
        <a href="#" onclick="tabSelect('search')">Token Search</a>
    </div>
    <div>
        <table>
            <tr>
                <td>
                    <div id="tab-add">
                        <div>
                            <h3>Add ERC20 Token</h3>
                            Please fill in the token/project details
                        </div>
                        <div>
                            <table>
                                <tr>
                                    <td>Name:</td>
                                    <td>
                                        <input class="input" id="name" placeholder="LegumeToken" size="20"
                                            onchange="tokenInputChanged()" oninput="tokenInputChanged()" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>Type:</td>
                                    <td>
                                        <select id="input.type" name="type" class="input" onchange="tokenInputChanged()"
                                            oninput="tokenInputChanged()">
                                            <option value="ERC20">ERC20 (Ethereum)</option>
                                            <option value="BEP2">BEP2 (Binance)</option>
                                            <option value="BEP20">BEP20 (Binance Smart Chain)</option>
                                            <option value="TRC10">TRC10 (Tron)</option>
                                            <option value="TRC20">TRC20 (Tron)</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Contract/ID:</td>
                                    <td>
                                        <input class="input" id="contract"
                                            placeholder="0xF784682C82526e245F50975190EF0fff4E4fC077" size="40"
                                            onchange="tokenInputChanged()" oninput="tokenInputChanged()" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div>Logo:</div>
                                    </td>
                                    <td>
                                        <div>
                                            <button class="button"
                                                onclick="document.getElementById('input.file-selector').click();">Upload</button>
                                            <input id="input.file-selector" type="file" style="display: none;"
                                                onchange="logoFileSelected();" />
                                            <span id="input.logo-input"></span>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Website:</td>
                                    <td>
                                        <input class="input" id="website" placeholder="https://legume.fi" size="40"
                                            onchange="tokenInputChanged()" oninput="tokenInputChanged()" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>Explorer:</td>
                                    <td>
                                        <input class="input" id="explorer"
                                            placeholder="https://etherscan.io/token/0xF784682C82526e245F50975190EF0fff4E4fC077"
                                            size="40" onchange="tokenInputChanged()" oninput="tokenInputChanged()" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>Short description:</td>
                                    <td><textarea class="input" id="short_description"
                                            placeholder="This is the best-tasting DeFi finance project."
                                            style="width: 100%;" rows="2" onchange="tokenInputChanged()"
                                            oninput="tokenInputChanged()"></textarea>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Check result:</td>
                                    <td><textarea class="input" id="input.check-result" style="width: 100%;" rows="2"
                                            onchange="tokenInputChanged()" oninput="tokenInputChanged()"></textarea>
                                    </td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>
                                        <button class="button" type="button" onclick="createBranchAndPull()">Create
                                            PR</button>
                                        <button class="button" type="button" onclick="checkInputButton()">Check</button>
                                        <button class="button" type="button" onclick="clearInput()">Clear</button>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </td>
                <td>
                    <div id="tab-prs" hidden="true">
                        <div>
                            <h3>Pull Requests</h3>
                        </div>
                        <div>
                            <button onclick="loadOpenPrs()">Search</button>
                            <span id="prs.count"></span>
                        </div>
                        <select class="input" id="prs.result" multiple size="12" style="width: 100%"
                            onchange="loadSelectedPrButton()">
                            <option>(search results)</option>
                        </select>
                        <div id="pr-info" style="width: 100%">
                            <hr />
                            <div>
                                <span id="pr-info.title">PR</span>
                                <br>
                                repo: <span id="pr-info.repo"></span>
                            </div>
                            <div>
                                <div>Detected token(s) in PR:</div>
                                <select class="input" id="pr-info.tokens" multiple size="2" style="width: 100%"
                                    onchange="loadTokensFromPr()">
                                </select>
                            </div>
                        </div>
                    </div>
                </td>
                <td>
                    <div id="tab-search" hidden="true">
                        <div>
                            <h3>Token Search</h3>
                        </div>
                        <div>
                            <input class="input" id="search.input" placeholder="TWT" onchange="searchButton()">
                            <button onclick="searchButton()">Search</button>
                        </div>
                        <select class="input" id="search.result" multiple size="20" style="width: 100%"
                            onchange="loadSearchResultButton()">
                            <option>(search results)</option>
                        </select>
                        <div>
                            <button onclick="loadSearchResultButton()">Load</button>
                        </div>
                    </div>
                </td>
                <td>
                    <div>
                        <h3>Token View</h3>
                    </div>
                    <div>
                        <table>
                            <tr>
                                <td>Type:</td>
                                <td>
                                    <strong><span id="info.type"></span></strong>
                                </td>
                            </tr>
                            <tr>
                                <td>Contract:</td>
                                <td>
                                    <strong><span id="info.contract"></span></strong>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    Logo preview:
                                    <div id="logo-preview" style="background-color: #E0E0E0;">
                                        <span id="logo-preview-light"
                                            style="background-color: #E0E0E0; display: inline-block; padding: 20px; align: center">
                                            <p align="center"></p>
                                            <p align="center"></p>
                                            <p align="center"></p>
                                        </span>
                                        <span id="logo-preview-dark"
                                            style="background-color: #202020; display: inline-block; padding: 20px; align: center">
                                            <p align="center"></p>
                                            <p align="center"></p>
                                            <p align="center"></p>
                                        </span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <textarea class="input" id="info.info" readonly="true" style="width: 100%;"
                                        rows="8"></textarea>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    Links:
                                    <span id="info.links"></span>
                                </td>
                            </tr>
                        </table>
                    </div>
                </td>
            </tr>
            <table>
    </div>
    <div>
        <hr />
        <div>
            <h3>Debug Section</h3>
        </div>
        <div>
            <button class="button" type="button" onclick="debugFillWithDummyData();">Fill test data</button>
            <span>
                Create PR in:
                <input type="radio" name="debug-pr-target" id="main" value="main"><label for="main">main</label>
                <input type="radio" name="debug-pr-target" id="fork" value="fork"><label for="fork">forked</label>
                assets repo
            </span>
        </div>
        <div>
            <p>Log</p>
            <textarea id="log" class="textarea-small" cols="100" rows="8" readonly="true" placeholder="log"></textarea>
        </div>
    </div>
</body>

</html>