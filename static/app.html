<html>

<head>
</head>
<script type="module">
    import { request } from "https://cdn.skypack.dev/@octokit/request";

    function getToken() {
        var urlParams = new URLSearchParams(window.location.search);
        return urlParams.get("token");
    }

    async function start() {
        const token = getToken();
        document.getElementById("token").innerText = token;

        const result = await request("GET /user/repos", {
            headers: {
                authorization: "token " + token
            }
        });

        result.data.forEach(r => console.log(r.full_name));
    }

    start();
</script>

<body>
    <div>
        App
        <a href="/">Start over</a>
    </div>
    <div>
        Token:
        <span id="token">/token/</span>
    </div>
</body>

</html>